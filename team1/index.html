<!doctype html>
<html>
  <head>
      <meta charset="utf-8">
      <title>로그인 페이지</title>
      <style>
            main { width:fit-content; margin:0.5em auto; }
            main>h1 { text-align:center; text-decoration:underline; }
            div#container { border:1px solid black; width:fit-content; padding:0.5em; margin:0.5em auto; }
            div#container div { margin:0.5em; }
            #btn { text-align:center;  }
            label { display:inline-block; width:3em; text-align:right; padding-right:0.3em; }
      </style>
      <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
      <script>
      /*
          function login() {
              let id = $('#id').val();
              let pwd = $('#pwd').val();
              if(id=='' || pwd=='') {
                 alert('아이디 암호를 확인해주세요');
              }else{
                 if(!confirm('로그인하시겠어요?')) {
          alert('포기');
                 }else{
          console.log('로그인 절차 시작됨');
                    $('#loginForm').submit();
                 }
              }
          }
      */
      
      function ajax_login(){
         var id = $('#id').val();
         var pwd = $('#pwd').val();
         
         var param = {};
         param.id = id;
         param.pwd = pwd;
         
         $.ajax({
           url:'../login',
           method:'post',
           cache:false,
           data:param,
           dataType:'json',
           success:function(res){
              if(res.ok){
                  alert('로그인 성공');
                 location.href='./gugu.html';
              }else{
            	  alert('로그인 실패');

              }
           },
           error:function(xhr,status,err){
              alert('에러:' + err);
           }
         });
      }
   </script>
  </head>
  <body>
     <main>
     <h1>[ ♥홍미경의 홈♥ ]</h1>
     <div id="container">
        <form id="loginForm" action="../login" method="post">
        <div><label for="id">아이디</label><input type="text" name="id" id="id" value="smith"></div>
        <div><label for="pwd">암호</label><input type="password" name="pwd" id="pwd" value="pwsmith"></div>
        <div id="btn">
         <button type="reset">취소</button>
           <button type="button" onclick="ajax_login()">로그인</button>
        </div>
        </form>
     </div>
     </main>
  </body>
</html>